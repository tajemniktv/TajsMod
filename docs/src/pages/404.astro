---
import BaseLayout from "../layouts/BaseLayout.astro";
---

<BaseLayout title="Page Not Found">
  <section class="min-h-[70vh] flex items-center justify-center">
    <div class="container-narrow text-center py-20">
      <div class="text-8xl mb-6">üîç</div>
      <h1 class="text-4xl md:text-5xl font-bold mb-4">Page Not Found</h1>
      <p class="text-gray-600 dark:text-gray-400 text-lg mb-8 max-w-md mx-auto">
        The page you're looking for doesn't exist or may have been moved.
      </p>
      <p
        class="text-gray-500 dark:text-gray-500 text-sm mb-8"
        id="redirect-message"
      >
        Checking for alternate URL...
      </p>
      <div class="flex flex-col sm:flex-row items-center justify-center gap-4">
        <a href={`${import.meta.env.BASE_URL}/`} class="btn-primary">
          Go to Home
        </a>
        <a href={`${import.meta.env.BASE_URL}/docs/`} class="btn-secondary">
          Browse Docs
        </a>
      </div>
    </div>
  </section>
</BaseLayout>

<script is:inline>
  // Case-insensitive redirect script
  (function () {
    const currentPath = window.location.pathname;
    const basePath = "/TajsMod";

    // Try case-insensitive redirect
    // Common case variations to check
    const variations = [
      currentPath.toLowerCase(),
      currentPath.toUpperCase(),
      // Handle common patterns like /tajsmod -> /TajsMod
      currentPath.replace(/\/tajsmod\//gi, "/TajsMod/"),
      currentPath.replace(/\/tajsmod$/gi, "/TajsMod"),
    ];

    // If current path doesn't start with correct base, try redirect
    if (
      !currentPath.startsWith(basePath) &&
      !currentPath.startsWith(basePath.toLowerCase())
    ) {
      // Check if it's a case mismatch
      const lowerPath = currentPath.toLowerCase();
      if (lowerPath.startsWith("/tajsmod")) {
        const correctedPath = basePath + currentPath.slice("/tajsmod".length);
        document.getElementById("redirect-message").textContent =
          "Redirecting to correct URL...";
        window.location.replace(correctedPath);
        return;
      }
    }

    // Add trailing slash if missing
    if (
      currentPath.startsWith(basePath) &&
      !currentPath.endsWith("/") &&
      !currentPath.includes(".")
    ) {
      const withSlash = currentPath + "/";
      document.getElementById("redirect-message").textContent =
        "Redirecting to correct URL...";
      window.location.replace(withSlash);
      return;
    }

    // No redirect found
    const msgEl = document.getElementById("redirect-message");
    if (msgEl) {
      msgEl.textContent = "Couldn't find an alternate URL.";
    }
  })();
</script>
