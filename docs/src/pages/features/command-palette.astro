---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { features } from "../../data/features";
import PageActions from "../../components/PageActions.astro";
import CopyButton from "../../components/CopyButton.astro";

// Find the command palette feature
const feature = features.find((f) => f.id === "command-palette");
if (!feature) {
  return Astro.redirect("/features/");
}

const BASE_URL = import.meta.env.BASE_URL;
---

<BaseLayout
  title="Command Palette"
  description="The Command Palette is your quick-access hub for all mod features. Learn how to use fuzzy search, keyboard navigation, and more."
>
  <!-- Hero -->
  <section
    class="bg-gradient-to-b from-accent-50 to-white dark:from-accent-900/20 dark:to-dark-950 pt-16 pb-12"
  >
    <div class="container-narrow text-center">
      <div class="text-6xl mb-6">{feature.icon}</div>
      <h1 class="text-4xl md:text-5xl font-bold mb-4">{feature.title}</h1>
      <p class="text-gray-600 dark:text-gray-400 max-w-2xl mx-auto text-lg">
        {feature.description}
      </p>
      <div class="flex flex-wrap justify-center gap-2 mt-6">
        {
          feature.tags.map((tag) => (
            <span class="px-3 py-1 bg-accent-100 dark:bg-accent-900/30 text-accent-700 dark:text-accent-300 rounded-full text-sm">
              {tag}
            </span>
          ))
        }
      </div>
    </div>
  </section>

  <section class="section">
    <div class="container-narrow">
      <!-- Intro -->
      <div class="prose dark:prose-invert max-w-none mb-12">
        <p class="text-lg">
          {feature.longDescription || feature.description}
        </p>
      </div>

      <!-- How to Open -->
      <div class="card mb-8">
        <h2 class="text-xl font-bold mb-4 flex items-center gap-2">
          <span>üöÄ</span>
          How to Open
        </h2>
        <div class="grid sm:grid-cols-2 gap-4">
          <div
            class="flex items-center gap-4 p-4 bg-gray-50 dark:bg-dark-700/50 rounded-xl"
          >
            <kbd
              class="px-4 py-2 bg-white dark:bg-dark-800 border border-gray-200 dark:border-dark-600 rounded-lg font-mono text-lg shadow-sm"
              >MMB</kbd
            >
            <span class="text-gray-600 dark:text-gray-400"
              >Middle Mouse Button</span
            >
          </div>
          <div
            class="flex items-center gap-4 p-4 bg-gray-50 dark:bg-dark-700/50 rounded-xl"
          >
            <kbd
              class="px-4 py-2 bg-white dark:bg-dark-800 border border-gray-200 dark:border-dark-600 rounded-lg font-mono text-lg shadow-sm"
              >Space</kbd
            >
            <span class="text-gray-600 dark:text-gray-400"
              >Spacebar (when not typing)</span
            >
          </div>
        </div>
      </div>

      <!-- Features -->
      <div class="card mb-8">
        <h2 class="text-xl font-bold mb-4 flex items-center gap-2">
          <span>‚ú®</span>
          Features
        </h2>
        <ul class="space-y-3">
          <li class="flex items-start gap-3">
            <span class="text-accent-500 mt-1">‚úì</span>
            <div>
              <strong>Fuzzy Search</strong>
              <p class="text-gray-600 dark:text-gray-400 text-sm">
                Type partial words like "scr" to find "screenshot"
              </p>
            </div>
          </li>
          <li class="flex items-start gap-3">
            <span class="text-accent-500 mt-1">‚úì</span>
            <div>
              <strong>Quick Actions</strong>
              <p class="text-gray-600 dark:text-gray-400 text-sm">
                Toggle settings, run commands, navigate to groups
              </p>
            </div>
          </li>
          <li class="flex items-start gap-3">
            <span class="text-accent-500 mt-1">‚úì</span>
            <div>
              <strong>Calculator</strong>
              <p class="text-gray-600 dark:text-gray-400 text-sm">
                Built-in calculator for quick math
              </p>
            </div>
          </li>
          <li class="flex items-start gap-3">
            <span class="text-accent-500 mt-1">‚úì</span>
            <div>
              <strong>Jump to Group</strong>
              <p class="text-gray-600 dark:text-gray-400 text-sm">
                Quickly navigate to any group node by name
              </p>
            </div>
          </li>
          <li class="flex items-start gap-3">
            <span class="text-accent-500 mt-1">‚úì</span>
            <div>
              <strong>Jump to Note</strong>
              <p class="text-gray-600 dark:text-gray-400 text-sm">
                Navigate to sticky notes
              </p>
            </div>
          </li>
        </ul>
      </div>

      <!-- Keyboard Shortcuts -->
      <div class="card mb-8">
        <h2 class="text-xl font-bold mb-4 flex items-center gap-2">
          <span>‚å®Ô∏è</span>
          Keyboard Navigation
        </h2>
        <div class="overflow-x-auto">
          <table class="w-full text-sm">
            <thead>
              <tr class="border-b border-gray-200 dark:border-dark-700">
                <th class="text-left py-2 pr-4 font-medium">Key</th>
                <th class="text-left py-2 font-medium">Action</th>
              </tr>
            </thead>
            <tbody class="divide-y divide-gray-100 dark:divide-dark-700">
              <tr>
                <td class="py-2 pr-4"
                  ><kbd
                    class="px-2 py-1 bg-gray-100 dark:bg-dark-700 rounded text-xs font-mono"
                    >‚Üë</kbd
                  >
                  <kbd
                    class="px-2 py-1 bg-gray-100 dark:bg-dark-700 rounded text-xs font-mono"
                    >‚Üì</kbd
                  ></td
                >
                <td class="py-2 text-gray-600 dark:text-gray-400"
                  >Navigate through results</td
                >
              </tr>
              <tr>
                <td class="py-2 pr-4"
                  ><kbd
                    class="px-2 py-1 bg-gray-100 dark:bg-dark-700 rounded text-xs font-mono"
                    >Enter</kbd
                  ></td
                >
                <td class="py-2 text-gray-600 dark:text-gray-400"
                  >Select current item</td
                >
              </tr>
              <tr>
                <td class="py-2 pr-4"
                  ><kbd
                    class="px-2 py-1 bg-gray-100 dark:bg-dark-700 rounded text-xs font-mono"
                    >Escape</kbd
                  ></td
                >
                <td class="py-2 text-gray-600 dark:text-gray-400"
                  >Close palette</td
                >
              </tr>
              <tr>
                <td class="py-2 pr-4"
                  ><kbd
                    class="px-2 py-1 bg-gray-100 dark:bg-dark-700 rounded text-xs font-mono"
                    >Backspace</kbd
                  ></td
                >
                <td class="py-2 text-gray-600 dark:text-gray-400"
                  >Go back (in sub-menus)</td
                >
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Tips -->
      {
        feature.tips && feature.tips.length > 0 && (
          <div class="card bg-accent-50 dark:bg-accent-900/10 border-accent-200 dark:border-accent-800/30 mb-8">
            <h2 class="text-xl font-bold mb-4 flex items-center gap-2">
              <span>üí°</span>
              Pro Tips
            </h2>
            <ul class="space-y-2">
              {feature.tips.map((tip) => (
                <li class="flex items-start gap-2 text-gray-700 dark:text-gray-300">
                  <span class="text-accent-500">‚Ä¢</span>
                  {tip}
                </li>
              ))}
            </ul>
          </div>
        )
      }

      <!-- Back to Features -->
      <div class="text-center">
        <a
          href={`${BASE_URL}/features/`}
          class="btn-secondary inline-flex items-center gap-2"
        >
          <svg
            class="w-4 h-4"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
          </svg>
          Back to All Features
        </a>
      </div>

      <!-- Page Actions -->
      <div class="mt-12 pt-8 border-t border-gray-200 dark:border-dark-700">
        <PageActions editPath="/features/command-palette.astro" />
      </div>
    </div>
  </section>
</BaseLayout>
